<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Azy Employee Management</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
</head>
<body class="light-theme">
    <div class="container-fluid">
        <header class="bg-dark text-white p-3 mb-4 rounded">
            <h1><i class="fas fa-users-cog me-2"></i>AZY Employee Management</h1>
        </header>

        <!-- Dashboard -->
        <div class="row mb-4" id="dashboard">
            <div class="col-md-3">
                <div class="card bg-dark text-white">
                    <div class="card-body text-center">
                        <h3><i class="fas fa-users me-2"></i>Employees</h3>
                        <h2 id="totalEmployees">0</h2>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card bg-dark text-white">
                    <div class="card-body text-center">
                        <h3><i class="fas fa-calendar-check me-2"></i>Today Present</h3>
                        <h2 id="todayPresent">0</h2>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card bg-dark text-white">
                    <div class="card-body text-center">
                        <h3><i class="fas fa-money-bill-wave me-2"></i>Total Paid</h3>
                        <h2 id="totalPaid">LKR 0.00</h2>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card bg-dark text-white">
                    <div class="card-body text-center">
                        <h3><i class="fas fa-hand-holding-usd me-2"></i>Total Due</h3>
                        <h2 id="totalDue">LKR 0.00</h2>
                    </div>
                </div>
            </div>
        </div>

        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="attendance-tab" data-bs-toggle="tab" data-bs-target="#attendance" type="button" role="tab">Attendance</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="salary-tab" data-bs-toggle="tab" data-bs-target="#salary" type="button" role="tab">Salary Payments</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="employees-tab" data-bs-toggle="tab" data-bs-target="#employees" type="button" role="tab">Employees</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="report-tab" data-bs-toggle="tab" data-bs-target="#report" type="button" role="tab">Reports</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="settings-tab" data-bs-toggle="tab" data-bs-target="#settings" type="button" role="tab">Settings</button>
            </li>
        </ul>

        <div class="tab-content p-3 border border-top-0 rounded-bottom" id="myTabContent">
            <!-- Attendance Tab -->
            <div class="tab-pane fade show active" id="attendance" role="tabpanel">
                <div class="card">
                    <div class="card-header bg-dark text-white">
                        <h3><i class="fas fa-calendar-check me-2"></i>Today's Attendance</h3>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label class="form-label">Date:</label>
                            <div class="input-group">
                                <input type="date" class="form-control" id="attendanceDate" value="">
                                <button class="btn btn-outline-dark" type="button" id="changeDateBtn"><i class="fas fa-lock"></i></button>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table class="table table-striped table-hover" id="attendanceTable">
                                <thead class="table-dark">
                                    <tr>
                                        <th>Employee ID</th>
                                        <th>Name</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Filled by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                        <button class="btn btn-outline-success mt-3" id="saveAttendance"><i class="fas fa-save me-2"></i>Save Attendance</button>
                        <button class="btn btn-outline-warning mt-3 ms-2" id="editAttendanceBtn"><i class="fas fa-edit me-2"></i>Edit Attendance</button>
                    </div>
                </div>
            </div>

            <!-- Salary Payments Tab -->
            <div class="tab-pane fade" id="salary" role="tabpanel">
                <div class="row">
                    <div class="col-md-8">
                        <div class="card mb-4">
                            <div class="card-header bg-dark text-white">
                                <h3><i class="fas fa-money-bill-wave me-2"></i>Payment/Receipt</h3>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label class="form-label">Date:</label>
                                    <input type="date" class="form-control" id="paymentDate" value="">
                                </div>
                                <div class="table-responsive">
                                    <table class="table table-striped" id="paymentTable">
                                        <thead class="table-dark">
                                            <tr>
                                                <th>Employee</th>
                                                <th>Balance</th>
                                                <th>Receipt</th>
                                                <th>Payment</th>
                                                <th>New Balance</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <!-- Filled by JavaScript -->
                                        </tbody>
                                    </table>
                                </div>
                                <button class="btn btn-outline-primary mt-3" id="savePayments"><i class="fas fa-save me-2"></i>Save Payments</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-header bg-dark text-white">
                                <h3><i class="fas fa-history me-2"></i>Payment History</h3>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label class="form-label">Filter by Date:</label>
                                    <input type="date" class="form-control" id="filterPaymentDate">
                                </div>
                                <div class="table-responsive">
                                    <table class="table table-striped" id="paymentHistoryTable">
                                        <thead class="table-dark">
                                            <tr>
                                                <th>Date</th>
                                                <th>Employee</th>
                                                <th>Amount</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <!-- Filled by JavaScript -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Employees Tab -->
            <div class="tab-pane fade" id="employees" role="tabpanel">
                <div class="row">
                    <div class="col-md-5">
                        <div class="card mb-4">
                            <div class="card-header bg-dark text-white">
                                <h3><i class="fas fa-user-plus me-2"></i>Add/Edit Employee</h3>
                            </div>
                            <div class="card-body">
                                <form id="employeeForm">
                                    <input type="hidden" id="employeeId">
                                    <div class="mb-3">
                                        <label class="form-label">NIC Number:</label>
                                        <input type="text" class="form-control" id="employeeNic" required>
                                        <div class="invalid-feedback">Please provide a valid NIC number</div>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Name:</label>
                                        <input type="text" class="form-control" id="employeeName" required>
                                        <div class="invalid-feedback">Please provide a name</div>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Daily Salary:</label>
                                        <div class="input-group">
                                            <span class="input-group-text currency-symbol">LKR</span>
                                            <input type="number" class="form-control" id="employeeSalary" min="0" step="0.01" required>
                                        </div>
                                        <div class="invalid-feedback">Please provide a valid salary amount</div>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Opening Balance:</label>
                                        <div class="input-group">
                                            <span class="input-group-text currency-symbol">LKR</span>
                                            <input type="number" class="form-control" id="employeeOpeningBalance" step="0.01" value="0">
                                        </div>
                                        <small class="text-muted">Use negative values for advances</small>
                                    </div>
                                    <div class="mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="employeeActive" checked>
                                        <label class="form-check-label" for="employeeActive">Active Employee</label>
                                    </div>
                                    <button type="submit" class="btn btn-outline-primary me-2"><i class="fas fa-save me-2"></i>Save</button>
                                    <button type="button" class="btn btn-outline-secondary" id="clearEmployeeForm"><i class="fas fa-times me-2"></i>Clear</button>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-7">
                        <div class="card">
                            <div class="card-header bg-dark text-white">
                                <h3><i class="fas fa-users me-2"></i>Employee List</h3>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-striped" id="employeeTable">
                                        <thead class="table-dark">
                                            <tr>
                                                <th>ID</th>
                                                <th>NIC</th>
                                                <th>Name</th>
                                                <th>Daily Salary</th>
                                                <th>Balance</th>
                                                <th>Status</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <!-- Filled by JavaScript -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- New Reports Tab -->
            <div class="tab-pane fade" id="report" role="tabpanel">
                <div class="card">
                    <div class="card-header bg-dark text-white">
                        <h3><i class="fas fa-file-alt me-2"></i>Employee Reports</h3>
                    </div>
                    <div class="card-body">
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <label class="form-label">Employee:</label>
                                <select class="form-select" id="reportEmployee">
                                    <option value="all">All Employees</option>
                                    <!-- Filled by JavaScript -->
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">From Date:</label>
                                <input type="date" class="form-control" id="reportFromDate">
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">To Date:</label>
                                <input type="date" class="form-control" id="reportToDate">
                            </div>
                        </div>
                        <button class="btn btn-outline-primary" id="generateReport">
                            <i class="fas fa-search me-2"></i>Generate Report
                        </button>
                        <button class="btn btn-outline-success ms-2" id="exportReport">
                            <i class="fas fa-file-export me-2"></i>Export to CSV
                        </button>
                        
                        <div class="table-responsive mt-3">
                            <table class="table table-striped" id="reportTable">
                                <thead class="table-dark">
                                    <tr>
                                        <th>Date</th>
                                        <th>Employee</th>
                                        <th>Description</th>
                                        <th>Credit</th>
                                        <th>Debit</th>
                                        <th>Balance</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Filled by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Tab -->
            <div class="tab-pane fade" id="settings" role="tabpanel">
                <div class="row">
                    <div class="col-md-6">
                        <div class="card mb-4">
                            <div class="card-header bg-dark text-white">
                                <h3><i class="fas fa-cog me-2"></i>System Settings</h3>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label class="form-label">Theme:</label>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="theme" id="lightTheme" value="light" checked>
                                        <label class="form-check-label" for="lightTheme">
                                            Light Theme
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="theme" id="darkTheme" value="dark">
                                        <label class="form-check-label" for="darkTheme">
                                            Dark Theme
                                        </label>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Security Passcode (4 digits):</label>
                                    <input type="password" class="form-control" id="systemPasscode" maxlength="4" pattern="\d{4}" placeholder="Enter 4-digit passcode">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Confirm Passcode:</label>
                                    <input type="password" class="form-control" id="confirmPasscode" maxlength="4" pattern="\d{4}" placeholder="Confirm 4-digit passcode">
                                </div>
                                <button class="btn btn-outline-primary" id="savePasscode"><i class="fas fa-save me-2"></i>Save Passcode</button>
                                
                                <hr>
                                
                                <div class="mb-3">
                                    <label class="form-label">Currency:</label>
                                    <select class="form-select" id="systemCurrency">
                                        <option value="LKR">Sri Lankan Rupee (LKR)</option>
                                        <option value="USD">US Dollar (USD)</option>
                                        <option value="EUR">Euro (EUR)</option>
                                        <option value="GBP">British Pound (GBP)</option>
                                        <option value="INR">Indian Rupee (INR)</option>
                                    </select>
                                </div>
                                <button class="btn btn-outline-primary" id="saveCurrency"><i class="fas fa-save me-2"></i>Save Currency</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header bg-dark text-white">
                                <h3><i class="fas fa-database me-2"></i>Backup</h3>
                            </div>
                            <div class="card-body">
                                <button class="btn btn-outline-success mb-3" id="createBackup"><i class="fas fa-file-export me-2"></i>Create Backup</button>
                                <div class="mb-3">
                                    <label class="form-label">Restore Backup:</label>
                                    <input type="file" class="form-control" id="restoreBackupFile" accept=".json">
                                </div>
                                <button class="btn btn-outline-warning" id="restoreBackup"><i class="fas fa-file-import me-2"></i>Restore Backup</button>
                                <div class="alert alert-info mt-3">
                                    <i class="fas fa-info-circle me-2"></i>Backups will be saved as "Attendance_YYYY-MM-DD.json"
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Passcode Modal -->
    <div class="modal fade" id="passcodeModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-dark text-white">
                    <h5 class="modal-title">Enter Passcode</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">Enter 4-digit passcode:</label>
                        <input type="password" class="form-control passcode-input" id="inputPasscode" maxlength="4" pattern="\d{4}" placeholder="0000">
                    </div>
                    <div class="alert alert-danger d-none" id="passcodeError">
                        Incorrect passcode. Please try again.
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-outline-primary" id="verifyPasscode">Verify</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Payment Modal -->
    <div class="modal fade" id="editPaymentModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-dark text-white">
                    <h5 class="modal-title">Edit Payment</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="editPaymentId">
                    <div class="mb-3">
                        <label class="form-label">Date:</label>
                        <input type="date" class="form-control" id="editPaymentDate">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Amount:</label>
                        <div class="input-group">
                            <span class="input-group-text currency-symbol">LKR</span>
                            <input type="number" class="form-control" id="editPaymentAmount" min="0" step="0.01">
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-outline-primary" id="updatePayment">Save Changes</button>
                    <button type="button" class="btn btn-outline-danger" id="deletePayment">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="script.js"></script>
</body>
</html>